<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>FeastLink â€“ Reset your password</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css"
          href="#{request.contextPath}/css/auth.css" />
</h:head>

<h:body>
    <div class="auth-shell">

        <!-- LEFT visual -->
        <div class="auth-left">
            <div class="auth-left-overlay"></div>
            <div class="auth-left-content">

                <h:graphicImage library="images"
                                name="feastlink-logo.png"
                                styleClass="auth-logo-mark" />

                <div class="auth-left-badge">BANQUET EXPERIENCE VISUAL</div>
                <div class="auth-left-logo">Feast<span>Link</span></div>
                <div class="auth-left-tagline">
                    Premium Banquet &amp; Catering Booking
                </div>
                <p class="auth-left-sub">
                    Reset your credentials and continue planning unforgettable events with ease.
                </p>
            </div>
        </div>

        <!-- RIGHT reset card -->
        <div class="auth-right">
            <div class="auth-card">
                <h:form id="forgotForm">

                    <div style="display:flex; justify-content:center; margin-bottom:10px;">
                        <h:graphicImage library="images"
                                        name="feastlink-logo.png"
                                        style="width:38px; height:auto; border-radius:999px;" />
                    </div>

                    <div class="auth-title">
                        Reset your password
                    </div>
                    <div class="auth-subtitle">
                        Enter your account email and choose a new password.
                    </div>

                    <div style="margin-top:10px;font-size:12px;">
                        <h:messages globalOnly="true"
                                    layout="list"
                                    infoClass="msg-info"
                                    errorClass="msg-error"
                                    warnClass="msg-warn" />
                    </div>

                    <div class="auth-form-grid">

                        <div>
                            <label class="auth-label" for="email">Email</label>
                            <h:inputText id="email"
                                         value="#{forgotPasswordBean.email}"
                                         required="true"
                                         requiredMessage="Please enter your email."
                                         styleClass="auth-input">
                                <f:passThroughAttribute name="placeholder"
                                                        value="Enter your email" />
                            </h:inputText>
                            <h:message for="email" styleClass="msg-error" />
                        </div>

                        <div>
                            <label class="auth-label" for="newPassword">New password</label>
                            <div class="password-field">
                                <h:inputSecret id="newPassword"
                                               value="#{forgotPasswordBean.newPassword}"
                                               required="true"
                                               requiredMessage="Please enter a new password."
                                               styleClass="auth-input"
                                               maxlength="100">
                                    <f:passThroughAttribute name="placeholder"
                                                            value="New password" />
                                </h:inputSecret>
                                <span class="password-toggle"
                                      data-target="forgotForm:newPassword"
                                      title="Show/Hide password">&#128065;</span>
                            </div>
                            <h:message for="newPassword" styleClass="msg-error" />
                        </div>

                        <div>
                            <label class="auth-label" for="confirmPassword">Confirm new password</label>
                            <div class="password-field">
                                <h:inputSecret id="confirmPassword"
                                               value="#{forgotPasswordBean.confirmPassword}"
                                               required="true"
                                               requiredMessage="Please confirm your new password."
                                               styleClass="auth-input"
                                               maxlength="100">
                                    <f:passThroughAttribute name="placeholder"
                                                            value="Confirm new password" />
                                </h:inputSecret>
                                <span class="password-toggle"
                                      data-target="forgotForm:confirmPassword"
                                      title="Show/Hide password">&#128065;</span>
                            </div>
                            <h:message for="confirmPassword" styleClass="msg-error" />
                        </div>

                    </div>

                    <h:commandButton value="Reset password"
                                     action="#{forgotPasswordBean.resetPassword}"
                                     styleClass="btn-primary" />

                    <div class="auth-footer">
                        Remember your password?
                        <h:link outcome="login"
                                styleClass="auth-link"
                                value="Back to sign in" />
                    </div>

                </h:form>
            </div>
        </div>

    </div>

    <!-- JS: eye toggle -->
    <script type="text/javascript">
        //<![CDATA[
        (function () {
            function initPasswordToggles() {
                var toggles = document.querySelectorAll('.password-toggle');
                for (var i = 0; i < toggles.length; i++) {
                    (function (t) {
                        var targetId = t.getAttribute('data-target');
                        var input = document.getElementById(targetId);
                        if (!input) return;
                        t.addEventListener('click', function () {
                            if (input.type === "password") {
                                input.type = "text";
                                t.classList.add('password-toggle--active');
                            } else {
                                input.type = "password";
                                t.classList.remove('password-toggle--active');
                            }
                        });
                    })(toggles[i]);
                }
            }
            window.addEventListener('load', initPasswordToggles);
        })();
        //]]>
    </script>
</h:body>
</html>
