<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="jakarta.faces.html"
                xmlns:f="jakarta.faces.core"
                xmlns:ui="jakarta.faces.facelets">

    <!-- HEADER FeastLink -->
    <header class="relative z-50 w-full">
        <!-- Nền header -->
        <div
            id="header-bg"
            class="absolute inset-0 bg-gradient-to-b from-[#020617] via-[#020617] to-[#020617] border-b border-[#facc6b]/20 shadow-[0_8px_30px_rgba(0,0,0,0.45)]">
        </div>

        <!-- NAVBAR -->
        <nav
            class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 sm:py-4 flex items-center justify-between gap-4">

            <!-- Logo -->
            <h:link outcome="/Customer/index"
                    styleClass="flex items-center gap-3 sm:gap-4 group">
                <div class="relative w-16 h-16 sm:w-20 sm:h-20 lg:w-24 lg:h-24">
                    <div
                        class="absolute inset-3 rounded-full blur-lg opacity-70 bg-[#d4af37]/70 group-hover:opacity-100 transition-opacity">
                    </div>
                    <img src="#{request.contextPath}/resources/images/feastlink-logo.png"
                         alt="FeastLink Logo"
                         class="relative w-full h-full object-contain" />
                </div>
                <div class="flex flex-col">
                    <span
                        class="text-lg sm:text-xl lg:text-2xl font-bold text-white tracking-[0.25em] sm:tracking-[0.3em] group-hover:text-[#d4af37] transition-colors duration-300">
                        FEASTLINK
                    </span>
                    <span
                        class="text-[8px] sm:text-[9px] lg:text-[10px] text-[#facc6b] font-light tracking-[0.35em] mt-0.5 uppercase">
                        Luxury Events
                    </span>
                </div>
            </h:link>

            <!-- Menu desktop -->
            <div class="hidden lg:flex flex-1 justify-end">
                <ul class="flex items-center gap-7 xl:gap-9">
                    <li>
                        <h:link outcome="/Admin/dashboard.xhtml"
                                styleClass="group relative text-white text-sm font-semibold tracking-wide transition-colors whitespace-nowrap">
                            <span class="relative z-10">RESTAURANTS</span>
                            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-[#d4af37] group-hover:w-full transition-all duration-300"></span>
                        </h:link>
                    </li>

                    <li>
                        <a href="#event-types"
                           class="group relative text-white text-sm font-semibold tracking-wide transition-colors whitespace-nowrap">
                            <span class="relative z-10">EVENT TYPES</span>
                            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-[#d4af37] group-hover:w-full transition-all duration-300"></span>
                        </a>
                    </li>
                    <li>
                        <a href="#offers"
                           class="group relative text-white text-sm font-semibold tracking-wide transition-colors whitespace-nowrap">
                            <span class="relative z-10">OFFERS</span>
                            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-[#d4af37] group-hover:w-full transition-all duration-300"></span>
                        </a>
                    </li>
                    <li>
                        <h:link outcome="/Customer/my-bookings"
                                styleClass="group relative text-white text-[11px] lg:text-[13px] font-semibold tracking-wide transition-colors whitespace-nowrap">
                            <span class="relative z-10">MY BOOKINGS</span>
                            <span class="absolute bottom-0 left-0 h-[2px] w-0 bg-[#d4af37] group-hover:w-full transition-all duration-300"></span>
                        </h:link>
                    </li>

                    <li>
                        <a href="#favorites"
                           class="group relative text-white text-sm font-semibold tracking-wide transition-colors whitespace-nowrap">
                            <span class="relative z-10">FAVORITES</span>
                            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-[#d4af37] group-hover:w-full transition-all duration-300"></span>
                        </a>
                    </li>
                      <li>
                        <h:link outcome="/Customer/feedback.xhtml"
                                styleClass="group relative text-white text-sm font-semibold tracking-wide transition-colors whitespace-nowrap">
                            <span class="relative z-10">FEEDBACK</span>
                            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-[#d4af37] group-hover:w-full transition-all duration-300"></span>
                        </h:link>
                    </li>
                    <li>
                        <a href="#support"
                           class="group relative text-white text-sm font-semibold tracking-wide transition-colors whitespace-nowrap">
                            <span class="relative z-10">SUPPORT</span>
                            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-[#d4af37] group-hover:w-full transition-all duration-300"></span>
                        </a>
                    </li>

                    <!-- CHƯA LOGIN -->
                    <ui:fragment rendered="#{empty sessionScope.loginIdentifier}">
                        <li>
                            <a href="#{request.contextPath}/faces/login.xhtml"
                               class="group relative text-[#facc6b] text-sm font-semibold tracking-wide transition-all whitespace-nowrap px-4 py-1.5 rounded-full border border-[#facc6b] bg-transparent hover:bg-[#facc6b]/10 hover:text-white shadow-[0_0_14px_rgba(250,204,107,0.4)]">
                                <span class="relative z-10">LOGIN</span>
                            </a>
                        </li>
                    </ui:fragment>

                    <!-- ĐÃ LOGIN: pill + dropdown -->
                    <ui:fragment rendered="#{not empty sessionScope.loginIdentifier}">
                        <li class="relative">
                            <button type="button"
                                    id="userMenuToggle"
                                    onclick="var e=event||window.event; e.stopPropagation(); var m=document.getElementById('userMenuPanel'); if(m){m.classList.toggle('hidden');}"
                                    class="inline-flex flex-col justify-center px-3 py-1 rounded-full
                                           border border-[#facc6b]/80
                                           bg-[#020617]
                                           shadow-[0_0_12px_rgba(250,204,107,0.35)]">
                                <span class="leading-tight text-[11px] font-semibold text-[#facc6b]">
                                    #{sessionScope.loginIdentifier}
                                </span>
                                <span class="leading-tight text-[9px] text-slate-300">
                                    FeastLink Member
                                </span>
                            </button>

                            <div id="userMenuPanel"
                                 onclick="event.stopPropagation();"
                                 class="hidden absolute right-0 mt-2 w-56 rounded-2xl
                                        bg-[#020617]/95 border border-[#facc6b]/40
                                        shadow-[0_18px_45px_rgba(0,0,0,0.75)] backdrop-blur-sm">

                                <div class="px-4 py-3 border-b border-[#1f2937]/80">
                                    <p class="text-[10px] uppercase tracking-wide text-slate-400">
                                        Signed in as
                                    </p>
                                    <p class="text-xs font-semibold text-[#facc6b] truncate">
                                        #{sessionScope.loginIdentifier}
                                    </p>
                                </div>

                                <div class="py-1">
                                    <a href="#{request.contextPath}/faces/Customer/profile.xhtml"
                                       class="block px-4 py-2 text-xs text-slate-100 hover:bg-white/5">
                                        View profile
                                    </a>

                                    <h:form style="margin:0;">
                                        <h:commandLink action="#{loginBean.logout}"
                                                       styleClass="block w-full text-left px-4 py-2 text-xs text-red-300 hover:bg-red-500/10">
                                            Sign out
                                        </h:commandLink>
                                    </h:form>
                                </div>
                            </div>
                        </li>
                    </ui:fragment>

                    <!-- FOR RESTAURANTS -->
                    <li>
                        <button type="button"
                                onclick="window.location = '#{request.contextPath}/faces/register_manager.xhtml'"
                                class="px-6 py-2 rounded-full border border-[#facc6b] text-xs font-semibold tracking-wide text-white bg-transparent hover:bg-[#facc6b]/10 transition-all duration-300 whitespace-nowrap">
                            FOR RESTAURANTS
                        </button>
                    </li>
                </ul>
            </div>

            <!-- Nút menu mobile -->
            <button id="mobileToggle"
                    class="lg:hidden flex flex-col justify-center items-center gap-1 w-9 h-9 rounded-full border border-[#facc6b]/60 bg-black/30">
                <span class="block w-5 h-[2px] bg-[#facc6b]"></span>
                <span class="block w-5 h-[2px] bg-[#facc6b]"></span>
                <span class="block w-5 h-[2px] bg-[#facc6b]"></span>
            </button>
        </nav>

        <!-- Menu mobile -->
        <div id="mobileMenu"
             class="lg:hidden absolute inset-x-0 top-full origin-top scale-y-0 opacity-0 pointer-events-none transform transition-all duration-200 ease-out z-40">
            <nav class="max-w-7xl mx-auto px-4 sm:px-6 pb-4">
                <ul class="flex flex-col gap-1 bg-[#020617]/95 border-t border-[#1f2937] pt-3 rounded-b-2xl">
                    <li>
                        <a href="#{request.contextPath}/faces/Customer/restaurants.xhtml"
                           class="block px-2 py-2 text-sm font-semibold tracking-wide text-white hover:text-[#facc6b]">
                            RESTAURANTS
                        </a>
                    </li>
                    <li>
                        <a href="#event-types"
                           class="block px-2 py-2 text-sm font-semibold tracking-wide text-white hover:text-[#facc6b]">
                            EVENT TYPES
                        </a>
                    </li>
                    <li>
                        <a href="#offers"
                           class="block px-2 py-2 text-sm font-semibold tracking-wide text-white hover:text-[#facc6b]">
                            OFFERS
                        </a>
                    </li>
                    <li>
                        <h:link outcome="/Customer/my-bookings"
                                styleClass="group relative text-white text-[11px] lg:text-[13px] font-semibold tracking-wide transition-colors whitespace-nowrap">
                            <span class="relative z-10">MY BOOKINGS</span>
                            <span class="absolute bottom-0 left-0 h-[2px] w-0 bg-[#d4af37] group-hover:w-full transition-all duration-300"></span>
                        </h:link>
                    </li>

                    <li>
                        <a href="#favorites"
                           class="block px-2 py-2 text-sm font-semibold tracking-wide text-white hover:text-[#facc6b]">
                            FAVORITES
                        </a>
                    </li>
                     <li>
                        <a href="#{request.contextPath}/faces/Customer/feedback.xhtml"
                           class="block px-2 py-2 text-sm font-semibold tracking-wide text-white hover:text-[#facc6b]">
                           FEEDBACK
                        </a>
                    </li>
                    <li>
                        <a href="#support"
                           class="block px-2 py-2 text-sm font-semibold tracking-wide text-white hover:text-[#facc6b]">
                            SUPPORT
                        </a>
                    </li>

                    <!-- MOBILE: khi chưa login -->
                    <ui:fragment rendered="#{empty sessionScope.loginIdentifier}">
                        <li>
                            <a href="#{request.contextPath}/faces/login.xhtml"
                               class="block px-2 py-2 text-sm font-semibold tracking-wide text-white hover:text-[#facc6b]">
                                LOGIN
                            </a>
                        </li>
                    </ui:fragment>

                    <!-- MOBILE: khi đã login – version đẹp hơn -->
                    <ui:fragment rendered="#{not empty sessionScope.loginIdentifier}">
                        <!-- nhãn ACCOUNT nhỏ -->
                        <li class="px-3 pt-3">
                            <span class="text-[10px] uppercase tracking-[0.18em] text-slate-400">
                                Account
                            </span>
                        </li>

                        <!-- pill email gọn + ton-sur-ton -->
                        <li class="px-3 pt-1">
                            <div class="flex items-center gap-3 px-3 py-2 rounded-2xl
                                        border border-[#facc6b]/40
                                        bg-black/40
                                        shadow-[0_0_10px_rgba(0,0,0,0.6)]">
                                <div class="flex flex-col">
                                    <span class="text-[12px] font-semibold text-[#facc6b] leading-tight">
                                        #{sessionScope.loginIdentifier}
                                    </span>
                                    <span class="text-[10px] text-slate-300 leading-tight">
                                        FeastLink Member
                                    </span>
                                </div>
                            </div>
                        </li>

                        <!-- View profile -->
                        <li class="mt-1">
                            <a href="#{request.contextPath}/faces/Customer/profile.xhtml"
                               class="block px-3 py-2 text-xs font-medium tracking-wide text-slate-100 hover:bg-white/5">
                                View profile
                            </a>
                        </li>

                        <!-- Sign out -->
                        <li>
                            <h:form style="margin:0;">
                                <h:commandLink action="#{loginBean.logout}"
                                               styleClass="block w-full text-left px-3 py-2 text-xs font-medium tracking-wide text-red-300 hover:bg-red-500/10">
                                    Sign out
                                </h:commandLink>
                            </h:form>
                        </li>
                    </ui:fragment>

                    <li class="pt-1 pb-2">
                        <button type="button"
                                onclick="window.location = '#{request.contextPath}/faces/register_manager.xhtml'"
                                class="w-full px-4 py-2 rounded-full border border-[#facc6b] text-xs font-semibold tracking-wide text-white bg-transparent hover:bg-[#facc6b]/10 transition-all duration-300">
                            FOR RESTAURANTS
                        </button>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- JS: đóng dropdown desktop khi click ra ngoài -->
    <script type="text/javascript">
        //<![CDATA[
        document.addEventListener('click', function () {
            var panel = document.getElementById('userMenuPanel');
            if (panel) {
                panel.classList.add('hidden');
            }
        });
        //]]>
    </script>

</ui:composition>
