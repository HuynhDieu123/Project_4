<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="jakarta.faces.html"
        xmlns:f="jakarta.faces.core"
        xmlns:ui="jakarta.faces.facelets"
        xmlns:pass="jakarta.faces.passthrough"
        template="/Admin/template.xhtml">

    <!-- Title hiển thị trên header của template -->
    <ui:define name="title">Cuisine Management</ui:define>

    <ui:define name="content">

        <!-- Page-specific styles -->
        <style>
            .page-wrapper {
                max-width: 1200px;
                margin: 0 auto;
                padding: 16px 0 40px;
                font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            }

            .page-header {
                display: flex;
                justify-content: space-between;
                align-items: flex-start;
                margin-bottom: 20px;
            }

            .page-title {
                font-size: 24px;
                font-weight: 600;
                color: #0f172a;
            }

            .page-subtitle {
                margin-top: 4px;
                font-size: 12px;
                color: #6b7280;
            }

            .page-badge {
                padding: 6px 12px;
                border-radius: 999px;
                font-size: 11px;
                text-transform: uppercase;
                letter-spacing: 0.18em;
                border: 1px solid #e5e7eb;
                background: #f9fafb;
                color: #4b5563;
            }

            .card {
                background: #ffffff;
                border-radius: 20px;
                padding: 20px 22px;
                box-shadow: 0 18px 40px rgba(15, 23, 42, 0.06);
                border: 1px solid #e5e7eb;
            }

            .grid-2 {
                display: grid;
                grid-template-columns: minmax(0, 1.7fr) minmax(0, 1.1fr);
                gap: 24px;
                align-items: flex-start;
            }

            .section-title {
                font-size: 14px;
                font-weight: 600;
                color: #111827;
                margin-bottom: 10px;
            }

            .search-row {
                display: flex;
                gap: 10px;
                margin-bottom: 14px;
            }

            .input-text {
                flex: 1;
                padding: 8px 10px;
                border-radius: 10px;
                border: 1px solid #e2e8f0;
                outline: none;
                font-size: 14px;
                transition: all 0.15s ease;
            }

            .input-text:focus {
                border-color: #6366f1;
                box-shadow: 0 0 0 1px rgba(99,102,241,0.35);
            }

            .btn {
                padding: 8px 14px;
                border-radius: 999px;
                border: none;
                cursor: pointer;
                font-size: 13px;
                font-weight: 500;
                white-space: nowrap;
                display: inline-flex;
                align-items: center;
                justify-content: center;
                gap: 6px;
            }

            .btn-primary {
                background: linear-gradient(135deg, #4f46e5, #6366f1);
                color: #fff;
                box-shadow: 0 10px 25px rgba(79, 70, 229, 0.35);
            }

            .btn-secondary {
                background: #e5e7eb;
                color: #111827;
            }

            .btn-danger {
                background: #ef4444;
                color: #fff;
            }

            table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 4px;
                font-size: 14px;
            }

            th, td {
                padding: 9px 12px;
                border-bottom: 1px solid #e5e7eb;
            }

            th {
                background: #f9fafb;
                text-align: left;
                font-weight: 600;
                color: #4b5563;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.05em;
            }

            tr:hover td {
                background: #f9fafb;
            }

            .table-empty {
                font-size: 13px;
                color: #6b7280;
                padding: 12px;
            }

            .form-group {
                margin-bottom: 14px;
            }

            .form-label {
                font-size: 13px;
                font-weight: 500;
                margin-bottom: 4px;
                display: block;
                color: #374151;
            }

            .required-dot {
                color: #ef4444;
            }

            .messages {
                margin-bottom: 12px;
                font-size: 13px;
            }

            .messages td {
                border: none;
                padding: 2px 0;
            }

            .messages .ui-message-error,
            .messages .ui-message {
                color: #b91c1c;
            }

            @media (max-width: 1024px) {
                .grid-2 {
                    grid-template-columns: 1fr;
                }
            }
        </style>

        <div class="page-wrapper">

            <!-- PAGE HEADER -->
            <div class="page-header">
                <div>
                    <div class="page-title">Cuisine Management</div>
                    <p class="page-subtitle">
                        Manage cuisine categories used by restaurants – for example: Vietnamese, Japanese, Korean, buffet...
                    </p>
                </div>
                <span class="page-badge">
                    CUISINES · ADMIN
                </span>
            </div>

            <!-- MAIN CARD -->
            <h:form id="cuisineForm">

                <h:messages globalOnly="true" layout="table" styleClass="messages"/>

                <div class="card">
                    <div class="grid-2">

                        <!-- LEFT: LIST + SEARCH -->
                        <div>
                            <div class="section-title">Search &amp; list</div>

                            <div class="search-row">
                                <h:inputText value="#{cuisineBean.keyword}"
                                             styleClass="input-text"
                                             maxlength="100"
                                             pass:placeholder="Search cuisines by name..."/>

                                <h:commandButton value="Search"
                                                 action="#{cuisineBean.search}"
                                                 styleClass="btn btn-primary"/>

                                <h:commandButton value="Clear"
                                                 action="#{cuisineBean.clearSearch}"
                                                 immediate="true"
                                                 styleClass="btn btn-secondary"/>
                            </div>

                            <table>
                                <thead>
                                <tr>
                                    <th style="width:80px;">ID</th>
                                    <th>Cuisine name</th>
                                    <th style="width:180px;">Actions</th>
                                </tr>
                                </thead>
                                <tbody>
                                <ui:repeat value="#{cuisineBean.cuisines}" var="c">
                                    <tr>
                                        <td>#{c.cuisineId}</td>
                                        <td>#{c.name}</td>
                                        <td>
                                            <h:commandButton value="Edit"
                                                             action="#{cuisineBean.prepareEdit(c)}"
                                                             styleClass="btn btn-secondary">
                                                <f:ajax render=":cuisineForm:editPanel"/>
                                            </h:commandButton>
                                            &#160;
                                            <h:commandButton value="Delete"
                                                             action="#{cuisineBean.delete(c)}"
                                                             styleClass="btn btn-danger"
                                                             onclick="return confirm('Are you sure you want to delete this cuisine?');">
                                                <f:ajax render="@form"/>
                                            </h:commandButton>
                                        </td>
                                    </tr>
                                </ui:repeat>

                                <!-- Empty state -->
                                <ui:fragment rendered="#{empty cuisineBean.cuisines}">
                                    <tr>
                                        <td colspan="3" class="table-empty">
                                            No cuisines found. Try adjusting your search or add a new cuisine on the right.
                                        </td>
                                    </tr>
                                </ui:fragment>
                                </tbody>
                            </table>
                        </div>

                        <!-- RIGHT: CREATE / EDIT FORM -->
                        <h:panelGroup id="editPanel" layout="block">
                            <div class="section-title">
                                <h:outputText value="#{cuisineBean.currentCuisine.cuisineId == null ?
                                                      'Add new cuisine' :
                                                      'Edit cuisine'}"/>
                            </div>

                            <div class="form-group">
                                <span class="form-label">
                                    Cuisine name <span class="required-dot">*</span>
                                </span>
                                <h:inputText id="name"
                                             value="#{cuisineBean.currentCuisine.name}"
                                             styleClass="input-text"
                                             required="true"
                                             requiredMessage="Cuisine name is required."
                                             maxlength="100"
                                             pass:placeholder="e.g. Vietnamese, Japanese, Korean..."/>
                                <h:message for="name"
                                           style="color:#ef4444;font-size:12px;display:block;margin-top:4px;"/>
                            </div>

                            <div style="margin-top:18px; display:flex; gap:10px;">
                                <h:commandButton value="#{cuisineBean.currentCuisine.cuisineId == null ? 'Create' : 'Save changes'}"
                                                 action="#{cuisineBean.save}"
                                                 styleClass="btn btn-primary">
                                    <f:ajax render="@form"/>
                                </h:commandButton>

                                <h:commandButton value="Reset form"
                                                 action="#{cuisineBean.prepareCreate}"
                                                 immediate="true"
                                                 styleClass="btn btn-secondary">
                                    <f:ajax render=":cuisineForm:editPanel"/>
                                </h:commandButton>
                            </div>
                        </h:panelGroup>

                    </div>
                </div>

            </h:form>
        </div>

    </ui:define>
</ui:composition>
